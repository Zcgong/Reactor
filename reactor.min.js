(function(k){function d(a,c){if(this instanceof d)this._ids={},this._order=[],this._value=a;else{if("function"!==typeof a)throw Error("Expected function, found "+typeof a);null===b?(b=e.length,e.push({body:a,context:c}),a.call(c),b=null):a.call(c)}}function l(){var a=f;g={};f=[];h=!1;for(var c=0;c<a.length;++c){b=a[c];var d=e[b];d.body.call(d.context)}b=null}k.Reactor=d;var b=null,e=[],g={},f=[],h=!1;d.prototype.depend=function(){null===b||this._ids[b]||(this._ids[b]=!0,this._order.push(b))};d.prototype.act=function(){for(var a=this._order,c=0;c<a.length;++c){var b=a[c];g[b]||(g[b]=!0,f.push(b))}h||(h=!0,setTimeout(l,0))};d.prototype.get=function(){this.depend();return this._value};d.prototype.set=function(a){this._value!==a&&(this._value=a,this.act())}})(this);
