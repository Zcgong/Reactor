(function(h){function b(a,d){if(this instanceof b)this._value=a,this._functions={};else{if("function"!==typeof a)throw Error("Expected function, found "+typeof a);null===c?(c=e.length,e.push({body:a,context:d}),a.call(d),c=null):a.call(d)}}function k(){var a=f;f={};g=null;for(var b in a)c=b,a=e[b],a.body.call(a.context);c=null}h.Reactor=b;var c=null,e=[],f={},g=null;b.prototype.depend=function(){null===c||this._functions[c]||(this._functions[c]=!0)};b.prototype.act=function(){for(var a in this._functions)f[a]=!0;null===g&&(g=setTimeout(k,0))};b.prototype.get=function(){this.depend();return this._value};b.prototype.set=function(a){this._value!==a&&(this._value=a,this.act())}})(this);
