(function(m){function e(a){this instanceof e?(this._ids={},this._order=[],this._value=a):n.apply(null,arguments)}function n(a,b){var c=typeof a;if("function"!==c)throw Error("Expected function, found "+c);null!==d?a.call(b):(f.push(g.length),g.push({body:a,context:b}),l())}function l(){var a=f;h={};f=[];k=!1;for(var b=0;b<a.length;++b){d=a[b];var c=g[d];c.body.call(c.context)}d=null}m.Reactor=e;var d=null,g=[],h={},f=[],k=!1;e.prototype.depend=function(){null===d||this._ids[d]||(this._ids[d]=!0,this._order.push(d))};e.prototype.act=function(){for(var a=this._order,b=0;b<a.length;++b){var c=a[b];h[c]||(h[c]=!0,f.push(c))}k||(k=!0,setTimeout(l,0))};e.prototype.get=function(){this.depend();return this._value};e.prototype.set=function(a){this._value!==a&&(this._value=a,this.act())}})(this);
